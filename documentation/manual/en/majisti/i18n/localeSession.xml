<?xml version="1.0" encoding="UTF-8"?>
<section xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xml:lang="en"
    xml:id="majisti.i18n.localeSession" version="5.0">
    <title>Locale Session</title>
    <para>The <classname>LocaleSession</classname> class provides a variety of
        functions meant to ease the management a multilingual application. It
        allows automatic handling of the application's supported languages with
        the help of a <classname>Zend_Session_Namespace</classname>. </para>
    <para>With a locale session object, it is possible to know the current
        locale of an application, the default locale, all the supported
        locales, if a locale is supported, etc. It also provides behaviours to
        add locales, switch between locales and reset the locales to the
        default ones found in the configuration.</para>
    <para>In order to supply supported languages to the locale session
        singleton, simply list all of the supported languages in the
        configuration using the following
        syntax:<programlisting>majisti.controllerPlugin.i18n.supportedLocales[] = es
majisti.controllerPlugin.i18n.supportedLocales[] = fr
majisti.controllerPlugin.i18n.supportedLocales[] = ch</programlisting></para>
    <para>As you may notice in the above example, there is no explicitly
        defined default language. In that case, Majisti sets the default locale
        to English (en). It is important to understand the difference between
        supported languages and the default language. You may wonder "how can
        English be the default locale when it's not even marked as supported in
        the configuration file?". Well, the answer is quite simple. You are
        allowed to put no supported locales at all. Majisti sets the default
        language in this case to English, as stated before. This means that the
        default locale and the supported locales are two different concepts.
        The supported locales do not include the default one. Think of them as
        "other than the default one" supported locales.</para>
    <para>To define the default locale of you application, the configuration
        setting is quite similar to the one of defining the supported locales.
        All there is to do is add the following line in the configuration
        file:<programlisting>majisti.controllerPlugin.i18n.defaultLocale = fr</programlisting></para>
    <para>You can always use the object oriented way, using
            <methodname>addSupportedLocale()</methodname>,
            <methodname>removeSupportedLocale()</methodname>,
            <methodname>setDefaultLocale()</methodname>.</para>
    <para>Now, if you want to switch between your default language and your
        supported language(s), you can simply
        do:<programlisting>$i18n = \Majisti\I18n\LocaleSession::getInstance();
$i18n->switchLocale();</programlisting>This
        will navigate between your supported locales and your default locale in
        a circular manner. Of course, you can directly switch to a locale by
        passing the locale string as a
        parameter:<programlisting>$i18n->switchLocale('en');</programlisting>This
        is particularly usefull on applications that must switch locales such
        as the ones making use of the <link
            xlink:href="majisti.controller.plugin.i18n">I18n</link> controller
        plugin.</para>
    <para>Moreover, if you want to temporarily disable a supported locale, you
        can always use <methodname>disableSupportedLocale</methodname>
        function. If the supported locale is the current locale used by the
        application, it will switch back to the default locale, or switch to
        the locale you optionally specified as a second parameter to the
        function. To reenable that supported locale, you can use
            <methodname>enableSupportedLocale()</methodname>. This is usefull
        on parts of websites that do not show pages in the supported locale,
        but you do not want your user to stay on the default locale once he
        quits that page.</para>
</section>
